## -*- mode:ulam -*-
#=t3649_test_compiler_elementandquark_unseenclasstypedef_localquarkarrayGTlong_edit
#!
./Foo.ulam:7:5: ERROR: EVAL: Unpacked array of quarks is unsupported:  Bar(7) with variable symbol name 'tar'.
Exit status: -1
Unrecoverable Program Test FAILURE.
##
## informed by t3647 (order matters)
## To turn off eval, defined SKIP_EVAL in src/test/TestCase_EndToEndCompiler.cpp
##
#>Foo.ulam
  ulam 1;
element Foo {
  constant Int cx = 7;
  typedef Bar(cx + 0) Tar;
  Tar b;
  Int test() {
    Tar tar[10];
    //Tar & tref = b;
    return tar[3];
    //return tref;
  }
}
use Bar;

#:Bar.ulam
  ulam 1;
quark Bar(Int x) {
  Bits(x) m_bits;
  Int toInt()
  {
    return (Int) m_bits;
  }
}


#.
