## -*- mode:ulam -*-
#=t3286_test_compiler_elementandquark_selfatomcasts
#!
Exit status: 0
Ue_Foo { Int(32) test() {  Atom(96) a;  Bar b;  b ( self cast )func . a self cast = 0 cast return } }
Uq_Bar { <NOMAIN> }
##
##      // in element, 'self' is an element: cast self to an atom arg, and as RHS.
##      // in quark, 'self' is a quark, 'atom' is an atom: cannot cast self to an atom (rhs)
##
#>Foo.ulam
  use Bar;
element Foo {
  Int test(){
    Atom a;
    Bar b;
    b.func((Atom) self);
    a = (Atom) self;
    return 0;
  }
}

#:Bar.ulam
quark Bar {
  Void func(Atom a){
    Atom t = self.atomof; //was self
  }
}
#.
