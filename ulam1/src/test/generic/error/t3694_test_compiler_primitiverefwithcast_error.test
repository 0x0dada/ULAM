## -*- mode:ulam -*-
#=t3694_test_compiler_primitiverefwithcast_error
#!
./A.ulam:6:16: ERROR: Cannot explicitly cast Int(3) to type: Int(32)&.
./A.ulam:6:5: ERROR: Initial value expression for: d, initialization is invalid.
./A.ulam:6:5: ERROR: Storage expression for: d, is invalid.
./A.ulam:2:9: ERROR: 2 Nodes with erroneous types detected after type labeling class: A.
Unrecoverable Program Type Label FAILURE.
#>A.ulam
  ulam 2;
element A {
  Bool sp;
  Int(3) a;
  Int test() {
    Int & d = (Int&) a;
    a = 3;
    return d;
 }
}

#.
