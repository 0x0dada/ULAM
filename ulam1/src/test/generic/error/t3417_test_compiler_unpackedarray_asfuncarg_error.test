## -*- mode:ulam -*-
#=t3417_test_compiler_unpackedarray_asfuncarg_error
#!
./A.ulam:3:12: ERROR: Function Definition parameter 1, type: Int(32)[10] requires UNPACKED array support.
./A.ulam:6:3: ERROR: Function Definition <func2> return type: Int(32)[10] requires UNPACKED array support.
./A.ulam:15:26: ERROR: Incompatible (nonscalar) types Int(32)[10] and Int(32)[10] for binary operator+ ; Suggest writing a loop.
./A.ulam:15:5: ERROR: Initial value expression for: site2, initialization is invalid.
./A.ulam:16:17: ERROR: Function Definition parameter 1, type: Int(32)[10] requires UNPACKED array support.
./A.ulam:1:9: ERROR: 7 Nodes with erroneous types detected after type labeling class: A.
Unrecoverable Program Type Label FAILURE.
#>A.ulam
element A {
  typedef Int BigSite[10];
  Int func(BigSite sarr) {
    return sarr[9];
  }
  BigSite func2() {
    BigSite s;
    for(Int i = 0; i < 10; ++i){
      s[i] = i;
    }
    return s;
  }
  Int test(){
    BigSite site = func2();
    BigSite site2 = site + site2;
    return func(site);
  }
 }
##
##      //bool rtn1 = fms->add("A.ulam","element A {\ntypedef Int BigSite[10];\nInt test(){\n BigSite site, site2; site = site2;\n return 2;\n }\n }\n");
#.
