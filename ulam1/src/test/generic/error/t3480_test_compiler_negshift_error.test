## -*- mode:ulam -*-
#=t3480_test_compiler_negshift_error
#!
./A.ulam:9:5: ERROR: Use a comparison operator to convert Int(32) to Bool(1) for 'while'.
./A.ulam:10:25: ERROR: Unsigned is the supported type for shift distance, operator<<; Suggest casting Int(2) to Unsigned.
./A.ulam:10:12: ERROR: Cannot cast erroneous type.
./A.ulam:11:20: ERROR: Unsigned is the supported type for shift distance, operator>>; Suggest casting Int(2) to Unsigned.
./A.ulam:11:12: ERROR: Cannot cast erroneous type.
./A.ulam:9:5: ERROR: Unresolved No.1: <while>.
./A.ulam:10:25: ERROR: Unresolved No.2: <<<>.
./A.ulam:11:20: ERROR: Unresolved No.3: <>>>.
./A.ulam:5:3: Warning: 3 nodes with unresolved types remain in function <test> (Uf_4test,3).
./A.ulam:5:7: Warning: Summary: 3 nodes with unresolved types remain in  a single function <test> in class: A.
./A.ulam:2:9: Warning: 3 data member nodes with unresolved types remain in class 'A'.
./A.ulam:2:9: ERROR: 3 Nodes with unresolved types detected after type labeling class: A.
Unrecoverable Program Type Label FAILURE.
##
##      //informed by t3246
##
#>A.ulam
  ulam 1;
element A {
  Bool(7) b;
  Unsigned d;
  Int test(){
    Int a;
    a = 8;
    d = 1;
    while(a){
      d = (Unsigned) (d << -1);
      a = (Int) (a >> -1);
    }
    return (Int) d;
  }
}
##
##      // oops! >> is infinite WHILE loop
##      //bool rtn1 = fms->add("A.ulam","element A {\nBool(7) b;\nUnsigned d;\nInt test(){Int a;\n a = 8;\nd = 1;\nwhile(a){\nd = (Unsigned) ((Bits) d << (Unsigned) -1);\n a = (Int) ((Bits) a >> (Unsigned) -1);\n}\nreturn (Int) d;\n }\n }\n");
##      //ok.
##      //bool rtn1 = fms->add("A.ulam","element A {\nBool(7) b;\nUnsigned d;\nInt test(){Int a;\n a = 8;\nd = 1;\n d = (Unsigned) ((Bits) d << (Unsigned) -1);\n a = (Int) ((Bits) a >> (Unsigned) -1);\nreturn (Int) d;\n }\n }\n");
##
#.
