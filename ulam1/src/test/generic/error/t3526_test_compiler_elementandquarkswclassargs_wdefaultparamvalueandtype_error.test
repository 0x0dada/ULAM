## -*- mode:ulam -*-
#=t3526_test_compiler_elementandquarkswclassargs_wdefaultparamvalueandtype_error
#!
./P.ulam:6:5: ERROR: Unresolved No.1.
./P.ulam:6:5: ERROR: Unresolved No.2.
./P.ulam:9:5: ERROR: Unresolved No.3.
./P.ulam:9:39: ERROR: Unresolved No.4.
./P.ulam:5:3: Warning: 4 nodes with unresolved types remain in function <test> (Uf_4test,1).
./P.ulam:5:7: Warning: Summary: 4 nodes with unresolved types remain in  a single function <test> in class: P.
./P.ulam:3:9: Warning: 4 data member nodes with unresolved types remain in class 'P'.
./P.ulam:3:9: ERROR: 4 Nodes with unresolved types detected after type labeling class: P.
Unrecoverable Program Type Label FAILURE.
##
##
#>P.ulam
ulam 1;
use Q;
element P {
  Bool b;
  Int test() {
    Q(4, 2) z; //fails
    Q() q; //ok
    Q(4) w; //ok
    return (Int) (w.sizeof + q.sizeof + z.sizeof);
    //return (Int) (z.sizeof);
  }
}

#:Q.ulam
ulam 1;
quark Q(Int b = 3, Unsigned(b) s = 1u) {
typedef Unsigned(s) Foo;
Foo f;
}

#:V.ulam
ulam 1;
quark V(Int a) {
  Unsigned(a) vfoo;
}

#.
